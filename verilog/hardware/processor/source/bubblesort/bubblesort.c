// Bubblesort benchmark
#include <stdio.h>
volatile unsigned int *gDebugLedsMemoryMappedRegister = (unsigned int *)0x2000;

void swap(int* xp, int* yp)
{
	int temp = *xp;
	*xp = *yp;
	*yp = temp;
}

void bubbleSort(int arr[], int n)
{
	int i, j;
	for (i = 0; i < n - 1; i++)


		for (j = 0; j < n - i - 1; j++)
			if (arr[j] > arr[j + 1])
				swap(&arr[j], &arr[j + 1]);
}

int main()
{
	int c = 0;
	while (1){
		int arr[] = { 20, 80, 9, 64, 34, 25, 12, 22, 11, 90, 121, 124,  94,  99, 144, 121,  81, 199,  80,  39, 134, 116, 144, 136,
	               87,  88, 159, 188, 117,  87,  38, 159,  80, 138, 213,  75,  77,
	       181, 124, 125,   7, 156, 223, 185, 227,  30, 241, 195, 251,  39,
	       160,  79, 235, 162, 122, 109, 135, 221, 225, 171, 134, 122, 116,
	       194,  26,  45,  57,  61, 156,  69,  55, 128, 106, 252,  76, 227,
	        47, 140, 179,  30,  76, 229, 222, 141,  93, 117,  76, 147, 144,
	       209,  13, 107,   3, 201, 246,  34,   0, 250, 150, 107, 185, 102,
	       208, 191, 127, 109, 175,  14, 185, 122,  31,  87, 245, 204,  63,
	       172, 218,  80, 152, 214, 219, 171, 195, 121,  13, 233, 242, 137,
	       246, 120,  25,  64, 202, 227,  84,  32, 153,  79, 181,  31, 229,
	       102, 104,  98, 249, 154,   4, 205, 236, 254, 182, 134, 130, 248,
	        34, 159, 255, 181,  99, 132,  68,  15,  66,  83, 107, 241, 248,
	       139, 223, 129, 217, 233, 169,  45,  57,   2, 136,  65, 105, 141,
	       164, 227, 194,  62,  85,  44, 168,  81,  89, 145,  31, 237, 200,
	        82,  29, 182, 222, 155,   8, 248, 150, 242, 233, 122,  57, 109,
	        31, 112, 165, 175,  78,  61,  94, 169, 170,  89, 250, 198, 101,
	       156, 112, 104,  85, 191, 112,  65,  55,  29, 161,  89, 241, 204,
	       234, 239,  31, 106, 124,  23, 210,  99, 163,  97,   5, 127, 221,
	        44,  82,  32,  21, 160,  82,   1,  37, 186, 134, 216,  25,  96,
	       230, 165, 222,  82, 187, 139, 112,   1, 252, 156, 118,  10, 165,
	       252, 143, 224, 208,  27, 253, 189, 115, 203,  27, 104,  89,  65,
	       200, 148, 197, 162, 118, 110, 252, 130, 183, 108, 221,  70,  73,
	        97, 105, 191, 199, 121, 138, 252,   0, 238, 136,  77, 207,  61,
	       224, 119, 216, 232,  52, 169, 203,  91, 244, 137,  46, 217, 247,
	       162,  55, 131, 242, 250, 198, 221,  44,  41, 249, 217, 141, 180,
	        54, 161,  81, 176,  71,  95,  99, 113, 150,  49,  91, 111,  66,
	       241, 235,   2, 247,  49, 211, 162,  93,  61, 224, 114,   6,   8,
	       239, 236, 123,  78,  34, 211, 138, 223,  10,  46,  27, 179,  55,
	       230, 115, 169,  95,  48,  47, 148,  99, 100, 103, 159, 171, 237,
	       147, 168, 224, 101, 112,  40, 195, 178, 179, 152,  62, 138, 105,
	       244, 178,  16,  41,  24, 188, 103, 148, 148,  72,  67,  97,  56,
	       216,   6, 129, 156,   5, 130,  49, 250, 184, 248, 145,  13, 213,
	       105, 108,  50, 251,  16,  52,  16, 236,  90,  78, 236,  91, 211,
	       200, 194,  85, 198, 104, 229,  56, 244, 225, 155,  13,  90, 173,
	        50, 238, 221,  95, 174,  61, 108,  63, 136, 122, 140,  10,  23,
	       169, 210,  90,  49,  46,  88, 209, 185, 227, 102, 208,  67, 132,
	       193, 149, 246, 126, 254, 183,  62, 150, 231,  14, 199, 241,  75,
	       253,  13, 127, 173, 117, 237, 233, 184, 254, 169, 138, 179,  39,
	       184,  79, 144, 119,  57,  62};
		int n = sizeof(arr) / sizeof(arr[0]);
		bubbleSort(arr, n);
		c++;
		if (c==1000){
			*gDebugLedsMemoryMappedRegister = 0xFF;
		}
		if (c==2000){
			*gDebugLedsMemoryMappedRegister = 0x00;
			c = 0;
		}	
	
	}
	return 0;
}
